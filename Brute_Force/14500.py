import sys

input = sys.stdin.readline

N, M = map(int, input().split())

paper = []
for _ in range(N):
  paper.append(list(map(int, input().split())))

# ㅡ 블럭
t1 = [(0, 0), (1, 0), (2, 0), (3, 0)]
t2 = [(0, 0), (0, 1), (0, 2), (0, 3)]

# ㅁ 블럭
t3 = [(0, 0), (1, 0), (0, 1), (1, 1)]

# ㄴ 블럭
t4 = [(0, 0), (0, 1), (0, 2), (1, 2)]
t5 = [(0, 0), (0, 1), (0, 2), (-1, 2)]
t6 = [(0, 0), (1, 0), (2, 0), (2, 1)]
t7 = [(0, 0), (1, 0), (2, 0), (2, -1)]
t16 = [(0, 0), (0, 1), (1, 0), (2, 0)]
t17 = [(0, 0), (0, -1), (1, 0), (2, 0)]
t18 = [(0, 0), (0, 1), (0, 2), (1, 0)]
t19 = [(0, 0), (0, 1), (0, 2), (-1, 0)]

# ㄹ 블럭
t8 = [(0, 0), (0, 1), (1, 1), (1, 2)]
t9 = [(0, 0), (0, 1), (-1, 1), (-1, 2)]
t10 = [(0, 0), (1, 0), (1, 1), (2, 1)]
t11 = [(0, 0), (1, 0), (1, -1), (2, -1)]

# ㅗ 블럭
t12 = [(0, 0), (1, 0), (1, -1), (2, 0)]
t13 = [(0, 0), (1, 0), (1, 1), (2, 0)]
t14 = [(0, 0), (1, 0), (1, -1), (1, 1)]
t15 = [(0, 0), (0, -1), (0, 1), (1, 0)]

blocks = [
    t1, t2, t3, t4, t5, t6, t7, t8, t9, t10, t11, t12, t13, t14, t15, t16, t17,
    t18, t19
]
ans = 0

for t in blocks:
  for i in range(M):
    for j in range(N):
      tmp = 0
      for dx, dy in t:
        tx = i + dx
        ty = j + dy
        if 0 <= tx < M and 0 <= ty < N:
          tmp += paper[ty][tx]
        else:
          break
      if tmp > ans:
        ans = tmp

print(ans)
